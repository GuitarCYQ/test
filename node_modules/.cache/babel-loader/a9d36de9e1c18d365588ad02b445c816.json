{"remainingRequest":"D:\\software\\file\\test\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\file\\test\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\software\\file\\test\\src\\utils\\handleRoutes.js","dependencies":[{"path":"D:\\software\\file\\test\\src\\utils\\handleRoutes.js","mtime":1638330357502},{"path":"D:\\software\\file\\test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\file\\test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\software\\file\\test\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L3NvZnR3YXJlL2ZpbGUvdGVzdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CgovKioKICogQGF1dGhvciBjaHV6aGl4aW4gMTIwNDUwNTA1NkBxcS5jb20g77yI5LiN5oOz5L+d55WZYXV0aG9y5Y+v5Yig6Zmk77yJCiAqIEBkZXNjcmlwdGlvbiBhbGzmqKHlvI/muLLmn5PlkI7nq6/ov5Tlm57ot6/nlLEKICogQHBhcmFtIGNvbnN0YW50Um91dGVzCiAqIEByZXR1cm5zIHsqfQogKi8KZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRSb3V0ZXIoYXN5bmNSb3V0ZXMpIHsKICByZXR1cm4gYXN5bmNSb3V0ZXMubWFwKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgaWYgKHJvdXRlLmNvbXBvbmVudCkgewogICAgICBpZiAocm91dGUuY29tcG9uZW50ID09PSAnTGF5b3V0JykgewogICAgICAgIHJvdXRlLmNvbXBvbmVudCA9IGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICByZXR1cm4gcmVxdWlyZShbJ0AvbGF5b3V0cyddLCByZXNvbHZlKTsKICAgICAgICB9OwogICAgICB9IGVsc2UgaWYgKHJvdXRlLmNvbXBvbmVudCA9PT0gJ0VtcHR5TGF5b3V0JykgewogICAgICAgIHJvdXRlLmNvbXBvbmVudCA9IGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICByZXR1cm4gcmVxdWlyZShbJ0AvbGF5b3V0cy9FbXB0eUxheW91dCddLCByZXNvbHZlKTsKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBpbmRleCA9IHJvdXRlLmNvbXBvbmVudC5pbmRleE9mKCd2aWV3cycpOwogICAgICAgIHZhciBwYXRoID0gaW5kZXggPiAwID8gcm91dGUuY29tcG9uZW50LnNsaWNlKGluZGV4KSA6ICJ2aWV3cy8iLmNvbmNhdChyb3V0ZS5jb21wb25lbnQpOwoKICAgICAgICByb3V0ZS5jb21wb25lbnQgPSBmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgcmV0dXJuIHJlcXVpcmUoWyJALyIuY29uY2F0KHBhdGgpXSwgcmVzb2x2ZSk7CiAgICAgICAgfTsKICAgICAgfQogICAgfQoKICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGgpIHJvdXRlLmNoaWxkcmVuID0gY29udmVydFJvdXRlcihyb3V0ZS5jaGlsZHJlbik7CiAgICBpZiAocm91dGUuY2hpbGRyZW4gJiYgcm91dGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSBkZWxldGUgcm91dGUuY2hpbGRyZW47CiAgICByZXR1cm4gcm91dGU7CiAgfSk7Cn0KLyoqCiAqIEBhdXRob3IgY2h1emhpeGluIDEyMDQ1MDUwNTZAcXEuY29tIO+8iOS4jeaDs+S/neeVmWF1dGhvcuWPr+WIoOmZpO+8iQogKiBAZGVzY3JpcHRpb24g5Yik5pat5b2T5YmN6Lev55Sx5piv5ZCm5YyF5ZCr5p2D6ZmQCiAqIEBwYXJhbSBwZXJtaXNzaW9ucwogKiBAcGFyYW0gcm91dGUKICogQHJldHVybnMge2Jvb2xlYW58Kn0KICovCgpmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKHBlcm1pc3Npb25zLCByb3V0ZSkgewogIGlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucGVybWlzc2lvbnMpIHsKICAgIHJldHVybiBwZXJtaXNzaW9ucy5zb21lKGZ1bmN0aW9uIChyb2xlKSB7CiAgICAgIHJldHVybiByb3V0ZS5tZXRhLnBlcm1pc3Npb25zLmluY2x1ZGVzKHJvbGUpOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHJldHVybiB0cnVlOwogIH0KfQovKioKICogQGF1dGhvciBjaHV6aGl4aW4gMTIwNDUwNTA1NkBxcS5jb20g77yI5LiN5oOz5L+d55WZYXV0aG9y5Y+v5Yig6Zmk77yJCiAqIEBkZXNjcmlwdGlvbiBpbnRlbGxpZ2VuY2XmqKHlvI/moLnmja5wZXJtaXNzaW9uc+aVsOe7hOaLpuaIqui3r+eUsQogKiBAcGFyYW0gcm91dGVzCiAqIEBwYXJhbSBwZXJtaXNzaW9ucwogKiBAcmV0dXJucyB7W119CiAqLwoKCmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJBc3luY1JvdXRlcyhyb3V0ZXMsIHBlcm1pc3Npb25zKSB7CiAgdmFyIGZpbmFsbHlSb3V0ZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciBpdGVtID0gX29iamVjdFNwcmVhZCh7fSwgcm91dGUpOwoKICAgIGlmIChoYXNQZXJtaXNzaW9uKHBlcm1pc3Npb25zLCBpdGVtKSkgewogICAgICBpZiAoaXRlbS5jaGlsZHJlbikgewogICAgICAgIGl0ZW0uY2hpbGRyZW4gPSBmaWx0ZXJBc3luY1JvdXRlcyhpdGVtLmNoaWxkcmVuLCBwZXJtaXNzaW9ucyk7CiAgICAgIH0KCiAgICAgIGZpbmFsbHlSb3V0ZXMucHVzaChpdGVtKTsKICAgIH0KICB9KTsKICByZXR1cm4gZmluYWxseVJvdXRlczsKfQ=="},{"version":3,"sources":["D:/software/file/test/src/utils/handleRoutes.js"],"names":["convertRouter","asyncRoutes","map","route","component","resolve","require","index","indexOf","path","slice","children","length","hasPermission","permissions","meta","some","role","includes","filterAsyncRoutes","routes","finallyRoutes","forEach","item","push"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASA,aAAT,CAAuBC,WAAvB,EAAoC;AACzC,SAAOA,WAAW,CAACC,GAAZ,CAAgB,UAACC,KAAD,EAAW;AAChC,QAAIA,KAAK,CAACC,SAAV,EAAqB;AACnB,UAAID,KAAK,CAACC,SAAN,KAAoB,QAAxB,EAAkC;AAChCD,QAAAA,KAAK,CAACC,SAAN,GAAkB,UAACC,OAAD;AAAA,iBAAaC,OAAO,CAAC,CAAC,WAAD,CAAD,EAAgBD,OAAhB,CAApB;AAAA,SAAlB;AACD,OAFD,MAEO,IAAIF,KAAK,CAACC,SAAN,KAAoB,aAAxB,EAAuC;AAC5CD,QAAAA,KAAK,CAACC,SAAN,GAAkB,UAACC,OAAD;AAAA,iBAChBC,OAAO,CAAC,CAAC,uBAAD,CAAD,EAA4BD,OAA5B,CADS;AAAA,SAAlB;AAED,OAHM,MAGA;AACL,YAAME,KAAK,GAAGJ,KAAK,CAACC,SAAN,CAAgBI,OAAhB,CAAwB,OAAxB,CAAd;AACA,YAAMC,IAAI,GACRF,KAAK,GAAG,CAAR,GAAYJ,KAAK,CAACC,SAAN,CAAgBM,KAAhB,CAAsBH,KAAtB,CAAZ,mBAAoDJ,KAAK,CAACC,SAA1D,CADF;;AAEAD,QAAAA,KAAK,CAACC,SAAN,GAAkB,UAACC,OAAD;AAAA,iBAAaC,OAAO,CAAC,aAAMG,IAAN,EAAD,EAAgBJ,OAAhB,CAApB;AAAA,SAAlB;AACD;AACF;;AACD,QAAIF,KAAK,CAACQ,QAAN,IAAkBR,KAAK,CAACQ,QAAN,CAAeC,MAArC,EACET,KAAK,CAACQ,QAAN,GAAiBX,aAAa,CAACG,KAAK,CAACQ,QAAP,CAA9B;AACF,QAAIR,KAAK,CAACQ,QAAN,IAAkBR,KAAK,CAACQ,QAAN,CAAeC,MAAf,KAA0B,CAAhD,EAAmD,OAAOT,KAAK,CAACQ,QAAb;AACnD,WAAOR,KAAP;AACD,GAlBM,CAAP;AAmBD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASU,aAAT,CAAuBC,WAAvB,EAAoCX,KAApC,EAA2C;AACzC,MAAIA,KAAK,CAACY,IAAN,IAAcZ,KAAK,CAACY,IAAN,CAAWD,WAA7B,EAA0C;AACxC,WAAOA,WAAW,CAACE,IAAZ,CAAiB,UAACC,IAAD;AAAA,aAAUd,KAAK,CAACY,IAAN,CAAWD,WAAX,CAAuBI,QAAvB,CAAgCD,IAAhC,CAAV;AAAA,KAAjB,CAAP;AACD,GAFD,MAEO;AACL,WAAO,IAAP;AACD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,OAAO,SAASE,iBAAT,CAA2BC,MAA3B,EAAmCN,WAAnC,EAAgD;AACrD,MAAMO,aAAa,GAAG,EAAtB;AACAD,EAAAA,MAAM,CAACE,OAAP,CAAe,UAACnB,KAAD,EAAW;AACxB,QAAMoB,IAAI,qBAAQpB,KAAR,CAAV;;AACA,QAAIU,aAAa,CAACC,WAAD,EAAcS,IAAd,CAAjB,EAAsC;AACpC,UAAIA,IAAI,CAACZ,QAAT,EAAmB;AACjBY,QAAAA,IAAI,CAACZ,QAAL,GAAgBQ,iBAAiB,CAACI,IAAI,CAACZ,QAAN,EAAgBG,WAAhB,CAAjC;AACD;;AACDO,MAAAA,aAAa,CAACG,IAAd,CAAmBD,IAAnB;AACD;AACF,GARD;AASA,SAAOF,aAAP;AACD","sourcesContent":["/**\n * @author chuzhixin 1204505056@qq.com （不想保留author可删除）\n * @description all模式渲染后端返回路由\n * @param constantRoutes\n * @returns {*}\n */\nexport function convertRouter(asyncRoutes) {\n  return asyncRoutes.map((route) => {\n    if (route.component) {\n      if (route.component === 'Layout') {\n        route.component = (resolve) => require(['@/layouts'], resolve)\n      } else if (route.component === 'EmptyLayout') {\n        route.component = (resolve) =>\n          require(['@/layouts/EmptyLayout'], resolve)\n      } else {\n        const index = route.component.indexOf('views')\n        const path =\n          index > 0 ? route.component.slice(index) : `views/${route.component}`\n        route.component = (resolve) => require([`@/${path}`], resolve)\n      }\n    }\n    if (route.children && route.children.length)\n      route.children = convertRouter(route.children)\n    if (route.children && route.children.length === 0) delete route.children\n    return route\n  })\n}\n\n/**\n * @author chuzhixin 1204505056@qq.com （不想保留author可删除）\n * @description 判断当前路由是否包含权限\n * @param permissions\n * @param route\n * @returns {boolean|*}\n */\nfunction hasPermission(permissions, route) {\n  if (route.meta && route.meta.permissions) {\n    return permissions.some((role) => route.meta.permissions.includes(role))\n  } else {\n    return true\n  }\n}\n\n/**\n * @author chuzhixin 1204505056@qq.com （不想保留author可删除）\n * @description intelligence模式根据permissions数组拦截路由\n * @param routes\n * @param permissions\n * @returns {[]}\n */\nexport function filterAsyncRoutes(routes, permissions) {\n  const finallyRoutes = []\n  routes.forEach((route) => {\n    const item = { ...route }\n    if (hasPermission(permissions, item)) {\n      if (item.children) {\n        item.children = filterAsyncRoutes(item.children, permissions)\n      }\n      finallyRoutes.push(item)\n    }\n  })\n  return finallyRoutes\n}\n"]}]}