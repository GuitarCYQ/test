{"remainingRequest":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\babel-loader\\lib\\index.js!D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\software\\file\\vue-admin-beautiful-test\\src\\config\\permission.js","dependencies":[{"path":"D:\\software\\file\\vue-admin-beautiful-test\\src\\config\\permission.js","mtime":1638330357262},{"path":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9zb2Z0d2FyZS9maWxlL3Z1ZS1hZG1pbi1iZWF1dGlmdWwtdGVzdC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L3NvZnR3YXJlL2ZpbGUvdnVlLWFkbWluLWJlYXV0aWZ1bC10ZXN0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKCi8qKgogKiBAYXV0aG9yIGNodXpoaXhpbiAxMjA0NTA1MDU2QHFxLmNvbSDvvIjkuI3mg7Pkv53nlZlhdXRob3Llj6/liKDpmaTvvIkKICogQGRlc2NyaXB0aW9uIOi3r+eUseWuiOWNq++8jOebruWJjeS4pOenjeaooeW8j++8mmFsbOaooeW8j+S4jmludGVsbGlnZW5jZeaooeW8jwogKi8KaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IFZhYlByb2dyZXNzIGZyb20gJ25wcm9ncmVzcyc7CmltcG9ydCAnbnByb2dyZXNzL25wcm9ncmVzcy5jc3MnOwppbXBvcnQgZ2V0UGFnZVRpdGxlIGZyb20gJ0AvdXRpbHMvcGFnZVRpdGxlJzsKaW1wb3J0IHsgYXV0aGVudGljYXRpb24sIGxvZ2luSW50ZXJjZXB0aW9uLCBwcm9ncmVzc0JhciwgcmVjb3JkUm91dGUsIHJvdXRlc1doaXRlTGlzdCB9IGZyb20gJ0AvY29uZmlnJzsKVmFiUHJvZ3Jlc3MuY29uZmlndXJlKHsKICBlYXNpbmc6ICdlYXNlJywKICBzcGVlZDogNTAwLAogIHRyaWNrbGVTcGVlZDogMjAwLAogIHNob3dTcGlubmVyOiBmYWxzZQp9KTsKcm91dGVyLmJlZm9yZVJlc29sdmUoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBoYXNUb2tlbiwgaGFzUGVybWlzc2lvbnMsIHBlcm1pc3Npb25zLCBhY2Nlc3NSb3V0ZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChwcm9ncmVzc0JhcikgVmFiUHJvZ3Jlc3Muc3RhcnQoKTsKICAgICAgICAgICAgaGFzVG9rZW4gPSBzdG9yZS5nZXR0ZXJzWyd1c2VyL2FjY2Vzc1Rva2VuJ107CiAgICAgICAgICAgIGlmICghbG9naW5JbnRlcmNlcHRpb24pIGhhc1Rva2VuID0gdHJ1ZTsKCiAgICAgICAgICAgIGlmICghaGFzVG9rZW4pIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghKHRvLnBhdGggPT09ICcvbG9naW4nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBwYXRoOiAnLycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChwcm9ncmVzc0JhcikgVmFiUHJvZ3Jlc3MuZG9uZSgpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDQ7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgaGFzUGVybWlzc2lvbnMgPSBzdG9yZS5nZXR0ZXJzWyd1c2VyL3Blcm1pc3Npb25zJ10gJiYgc3RvcmUuZ2V0dGVyc1sndXNlci9wZXJtaXNzaW9ucyddLmxlbmd0aCA+IDA7CgogICAgICAgICAgICBpZiAoIWhhc1Blcm1pc3Npb25zKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE0OwoKICAgICAgICAgICAgaWYgKGxvZ2luSW50ZXJjZXB0aW9uKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTg7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXNlci9zZXRQZXJtaXNzaW9ucycsIFsnYWRtaW4nXSk7CgogICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgcGVybWlzc2lvbnMgPSBbJ2FkbWluJ107CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIzOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvZ2V0VXNlckluZm8nKTsKCiAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICBwZXJtaXNzaW9ucyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgYWNjZXNzUm91dGVzID0gW107CgogICAgICAgICAgICBpZiAoIShhdXRoZW50aWNhdGlvbiA9PT0gJ2ludGVsbGlnZW5jZScpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDMxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjg7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgncm91dGVzL3NldFJvdXRlcycsIHBlcm1pc3Npb25zKTsKCiAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICBhY2Nlc3NSb3V0ZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzU7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgIGlmICghKGF1dGhlbnRpY2F0aW9uID09PSAnYWxsJykpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNDsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdyb3V0ZXMvc2V0QWxsUm91dGVzJyk7CgogICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgYWNjZXNzUm91dGVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICByb3V0ZXIuYWRkUm91dGVzKGFjY2Vzc1JvdXRlcyk7CiAgICAgICAgICAgIG5leHQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0byksIHt9LCB7CiAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZQogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NDsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDE0KTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQzOwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VzZXIvcmVzZXRBY2Nlc3NUb2tlbicpOwoKICAgICAgICAgIGNhc2UgNDM6CiAgICAgICAgICAgIGlmIChwcm9ncmVzc0JhcikgVmFiUHJvZ3Jlc3MuZG9uZSgpOwoKICAgICAgICAgIGNhc2UgNDQ6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NzsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgaWYgKHJvdXRlc1doaXRlTGlzdC5pbmRleE9mKHRvLnBhdGgpICE9PSAtMSkgewogICAgICAgICAgICAgIG5leHQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAocmVjb3JkUm91dGUpIHsKICAgICAgICAgICAgICAgIG5leHQoIi9sb2dpbj9yZWRpcmVjdD0iLmNvbmNhdCh0by5wYXRoKSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5leHQoJy9sb2dpbicpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHByb2dyZXNzQmFyKSBWYWJQcm9ncmVzcy5kb25lKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICBjYXNlIDQ3OgogICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IGdldFBhZ2VUaXRsZSh0by5tZXRhLnRpdGxlKTsKCiAgICAgICAgICBjYXNlIDQ4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMTQsIDM5XV0pOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7CiAgaWYgKHByb2dyZXNzQmFyKSBWYWJQcm9ncmVzcy5kb25lKCk7Cn0pOw=="},{"version":3,"sources":["D:/software/file/vue-admin-beautiful-test/src/config/permission.js"],"names":["router","store","VabProgress","getPageTitle","authentication","loginInterception","progressBar","recordRoute","routesWhiteList","configure","easing","speed","trickleSpeed","showSpinner","beforeResolve","to","from","next","start","hasToken","getters","path","done","hasPermissions","length","dispatch","permissions","accessRoutes","addRoutes","replace","indexOf","document","title","meta","afterEach"],"mappings":"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","sourcesContent":["/**\n * @author chuzhixin 1204505056@qq.com （不想保留author可删除）\n * @description 路由守卫，目前两种模式：all模式与intelligence模式\n */\nimport router from '@/router'\nimport store from '@/store'\nimport VabProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\nimport getPageTitle from '@/utils/pageTitle'\nimport {\n  authentication,\n  loginInterception,\n  progressBar,\n  recordRoute,\n  routesWhiteList,\n} from '@/config'\n\nVabProgress.configure({\n  easing: 'ease',\n  speed: 500,\n  trickleSpeed: 200,\n  showSpinner: false,\n})\nrouter.beforeResolve(async (to, from, next) => {\n  if (progressBar) VabProgress.start()\n  let hasToken = store.getters['user/accessToken']\n\n  if (!loginInterception) hasToken = true\n\n  if (hasToken) {\n    if (to.path === '/login') {\n      next({ path: '/' })\n      if (progressBar) VabProgress.done()\n    } else {\n      const hasPermissions =\n        store.getters['user/permissions'] &&\n        store.getters['user/permissions'].length > 0\n      if (hasPermissions) {\n        next()\n      } else {\n        try {\n          let permissions\n          if (!loginInterception) {\n            //settings.js loginInterception为false时，创建虚拟权限\n            await store.dispatch('user/setPermissions', ['admin'])\n            permissions = ['admin']\n          } else {\n            permissions = await store.dispatch('user/getUserInfo')\n          }\n\n          let accessRoutes = []\n          if (authentication === 'intelligence') {\n            accessRoutes = await store.dispatch('routes/setRoutes', permissions)\n          } else if (authentication === 'all') {\n            accessRoutes = await store.dispatch('routes/setAllRoutes')\n          }\n          router.addRoutes(accessRoutes)\n          next({ ...to, replace: true })\n        } catch {\n          await store.dispatch('user/resetAccessToken')\n          if (progressBar) VabProgress.done()\n        }\n      }\n    }\n  } else {\n    if (routesWhiteList.indexOf(to.path) !== -1) {\n      next()\n    } else {\n      if (recordRoute) {\n        next(`/login?redirect=${to.path}`)\n      } else {\n        next('/login')\n      }\n\n      if (progressBar) VabProgress.done()\n    }\n  }\n  document.title = getPageTitle(to.meta.title)\n})\nrouter.afterEach(() => {\n  if (progressBar) VabProgress.done()\n})\n"]}]}