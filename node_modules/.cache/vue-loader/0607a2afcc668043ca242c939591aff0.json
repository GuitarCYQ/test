{"remainingRequest":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\software\\file\\vue-admin-beautiful-test\\src\\views\\personnelManagement\\userManagement\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\software\\file\\vue-admin-beautiful-test\\src\\views\\personnelManagement\\userManagement\\index.vue","mtime":1638330357629},{"path":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\software\\file\\vue-admin-beautiful-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldExpc3QsIGRvRGVsZXRlIH0gZnJvbSAnQC9hcGkvdXNlck1hbmFnZW1lbnQnCmltcG9ydCBFZGl0IGZyb20gJy4vY29tcG9uZW50cy9Vc2VyTWFuYWdlbWVudEVkaXQnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1VzZXJNYW5hZ2VtZW50JywKICBjb21wb25lbnRzOiB7IEVkaXQgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogbnVsbCwKICAgICAgbGlzdExvYWRpbmc6IHRydWUsCiAgICAgIGxheW91dDogJ3RvdGFsLCBzaXplcywgcHJldiwgcGFnZXIsIG5leHQsIGp1bXBlcicsCiAgICAgIHRvdGFsOiAwLAogICAgICBzZWxlY3RSb3dzOiAnJywKICAgICAgZWxlbWVudExvYWRpbmdUZXh0OiAn5q2j5Zyo5Yqg6L29Li4uJywKICAgICAgcXVlcnlGb3JtOiB7CiAgICAgICAgcGFnZU5vOiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgIH0sCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgbWV0aG9kczogewogICAgc2V0U2VsZWN0Um93cyh2YWwpIHsKICAgICAgdGhpcy5zZWxlY3RSb3dzID0gdmFsCiAgICB9LAogICAgaGFuZGxlRWRpdChyb3cpIHsKICAgICAgaWYgKHJvdy5pZCkgewogICAgICAgIHRoaXMuJHJlZnNbJ2VkaXQnXS5zaG93RWRpdChyb3cpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmc1snZWRpdCddLnNob3dFZGl0KCkKICAgICAgfQogICAgfSwKICAgIGhhbmRsZURlbGV0ZShyb3cpIHsKICAgICAgaWYgKHJvdy5pZCkgewogICAgICAgIHRoaXMuJGJhc2VDb25maXJtKCfkvaDnoa7lrpropoHliKDpmaTlvZPliY3pobnlkJcnLCBudWxsLCBhc3luYyAoKSA9PiB7CiAgICAgICAgICBjb25zdCB7IG1zZyB9ID0gYXdhaXQgZG9EZWxldGUoeyBpZHM6IHJvdy5pZCB9KQogICAgICAgICAgdGhpcy4kYmFzZU1lc3NhZ2UobXNnLCAnc3VjY2VzcycpCiAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgfSkKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RSb3dzLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGNvbnN0IGlkcyA9IHRoaXMuc2VsZWN0Um93cy5tYXAoKGl0ZW0pID0+IGl0ZW0uaWQpLmpvaW4oKQogICAgICAgICAgdGhpcy4kYmFzZUNvbmZpcm0oJ+S9oOehruWumuimgeWIoOmZpOmAieS4remhueWQlycsIG51bGwsIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgY29uc3QgeyBtc2cgfSA9IGF3YWl0IGRvRGVsZXRlKHsgaWRzIH0pCiAgICAgICAgICAgIHRoaXMuJGJhc2VNZXNzYWdlKG1zZywgJ3N1Y2Nlc3MnKQogICAgICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgICB9KQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRiYXNlTWVzc2FnZSgn5pyq6YCJ5Lit5Lu75L2V6KGMJywgJ2Vycm9yJykKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucXVlcnlGb3JtLnBhZ2VTaXplID0gdmFsCiAgICAgIHRoaXMuZmV0Y2hEYXRhKCkKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgewogICAgICB0aGlzLnF1ZXJ5Rm9ybS5wYWdlTm8gPSB2YWwKICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgfSwKICAgIHF1ZXJ5RGF0YSgpIHsKICAgICAgdGhpcy5xdWVyeUZvcm0ucGFnZU5vID0gMQogICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICB9LAogICAgYXN5bmMgZmV0Y2hEYXRhKCkgewogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZQogICAgICBjb25zdCB7IGRhdGEsIHRvdGFsQ291bnQgfSA9IGF3YWl0IGdldExpc3QodGhpcy5xdWVyeUZvcm0pCiAgICAgIHRoaXMubGlzdCA9IGRhdGEKICAgICAgdGhpcy50b3RhbCA9IHRvdGFsQ291bnQKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgIH0sIDMwMCkKICAgIH0sCiAgfSwKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/personnelManagement/userManagement","sourcesContent":["<template>\n  <div class=\"userManagement-container\">\n    <vab-query-form>\n      <vab-query-form-left-panel :span=\"12\">\n        <el-button icon=\"el-icon-plus\" type=\"primary\" @click=\"handleEdit\">\n          添加\n        </el-button>\n        <el-button icon=\"el-icon-delete\" type=\"danger\" @click=\"handleDelete\">\n          批量删除\n        </el-button>\n      </vab-query-form-left-panel>\n      <vab-query-form-right-panel :span=\"12\">\n        <el-form :inline=\"true\" :model=\"queryForm\" @submit.native.prevent>\n          <el-form-item>\n            <el-input\n              v-model.trim=\"queryForm.username\"\n              placeholder=\"请输入用户名\"\n              clearable\n            />\n          </el-form-item>\n          <el-form-item>\n            <el-button icon=\"el-icon-search\" type=\"primary\" @click=\"queryData\">\n              查询\n            </el-button>\n          </el-form-item>\n        </el-form>\n      </vab-query-form-right-panel>\n    </vab-query-form>\n\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      :element-loading-text=\"elementLoadingText\"\n      @selection-change=\"setSelectRows\"\n    >\n      <el-table-column show-overflow-tooltip type=\"selection\"></el-table-column>\n      <el-table-column\n        show-overflow-tooltip\n        prop=\"id\"\n        label=\"id\"\n      ></el-table-column>\n      <el-table-column\n        show-overflow-tooltip\n        prop=\"username\"\n        label=\"用户名\"\n      ></el-table-column>\n      <el-table-column\n        show-overflow-tooltip\n        prop=\"email\"\n        label=\"邮箱\"\n      ></el-table-column>\n\n      <el-table-column show-overflow-tooltip label=\"权限\">\n        <template #default=\"{ row }\">\n          <el-tag v-for=\"(item, index) in row.permissions\" :key=\"index\">\n            {{ item }}\n          </el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        show-overflow-tooltip\n        prop=\"datatime\"\n        label=\"修改时间\"\n      ></el-table-column>\n      <el-table-column show-overflow-tooltip label=\"操作\" width=\"200\">\n        <template #default=\"{ row }\">\n          <el-button type=\"text\" @click=\"handleEdit(row)\">编辑</el-button>\n          <el-button type=\"text\" @click=\"handleDelete(row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-pagination\n      background\n      :current-page=\"queryForm.pageNo\"\n      :page-size=\"queryForm.pageSize\"\n      :layout=\"layout\"\n      :total=\"total\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n    ></el-pagination>\n    <edit ref=\"edit\" @fetch-data=\"fetchData\"></edit>\n  </div>\n</template>\n\n<script>\n  import { getList, doDelete } from '@/api/userManagement'\n  import Edit from './components/UserManagementEdit'\n\n  export default {\n    name: 'UserManagement',\n    components: { Edit },\n    data() {\n      return {\n        list: null,\n        listLoading: true,\n        layout: 'total, sizes, prev, pager, next, jumper',\n        total: 0,\n        selectRows: '',\n        elementLoadingText: '正在加载...',\n        queryForm: {\n          pageNo: 1,\n          pageSize: 10,\n          username: '',\n        },\n      }\n    },\n    created() {\n      this.fetchData()\n    },\n    methods: {\n      setSelectRows(val) {\n        this.selectRows = val\n      },\n      handleEdit(row) {\n        if (row.id) {\n          this.$refs['edit'].showEdit(row)\n        } else {\n          this.$refs['edit'].showEdit()\n        }\n      },\n      handleDelete(row) {\n        if (row.id) {\n          this.$baseConfirm('你确定要删除当前项吗', null, async () => {\n            const { msg } = await doDelete({ ids: row.id })\n            this.$baseMessage(msg, 'success')\n            this.fetchData()\n          })\n        } else {\n          if (this.selectRows.length > 0) {\n            const ids = this.selectRows.map((item) => item.id).join()\n            this.$baseConfirm('你确定要删除选中项吗', null, async () => {\n              const { msg } = await doDelete({ ids })\n              this.$baseMessage(msg, 'success')\n              this.fetchData()\n            })\n          } else {\n            this.$baseMessage('未选中任何行', 'error')\n            return false\n          }\n        }\n      },\n      handleSizeChange(val) {\n        this.queryForm.pageSize = val\n        this.fetchData()\n      },\n      handleCurrentChange(val) {\n        this.queryForm.pageNo = val\n        this.fetchData()\n      },\n      queryData() {\n        this.queryForm.pageNo = 1\n        this.fetchData()\n      },\n      async fetchData() {\n        this.listLoading = true\n        const { data, totalCount } = await getList(this.queryForm)\n        this.list = data\n        this.total = totalCount\n        setTimeout(() => {\n          this.listLoading = false\n        }, 300)\n      },\n    },\n  }\n</script>\n"]}]}